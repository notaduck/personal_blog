<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/personal_blog/component---src-layouts-index-js-547dc2de0b6f2e825259.js" as="script"/><link rel="preload" href="/personal_blog/component---src-templates-post-js-d37e94d6ace0825752a5.js" as="script"/><link rel="preload" href="/personal_blog/path---markdown-post-fa56bf20514985089ff7.js" as="script"/><link rel="preload" href="/personal_blog/app-e93bb8a86c40144abace.js" as="script"/><link rel="preload" href="/personal_blog/commons-512ca5ce87838b4470c0.js" as="script"/><style data-styled-components="hUhYMh llRMCE haUzkZ eVhvCo">
/* sc-component-id: sc-bdVaJa */
.hUhYMh{background:#2F333D;margin-bottom:2.5rem;overflow:hidden;position:relative;height:20vh;} .hUhYMh h1 img{height:80px;}
/* sc-component-id: sc-bwzfXH */
.llRMCE{margin:0,auto;max-width:960px;padding:1.45rem 1.0875rem;position:relative;z-index:2;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}
/* sc-component-id: sc-htpNat */
.haUzkZ ul{list-style-type:none;margin:0;padding:0;overflow:hidden;background-color:#ECF0F1;} .haUzkZ li{float:left;} .haUzkZ li a{display:block;color:white;text-align:center;padding:10px 16px;-webkit-text-decoration:none;text-decoration:none;color:#2F333D;} .haUzkZ li a:hover:not(.active){border-bottom:4px solid #2F333D;} .haUzkZ .active{background-color:#BC435D;}
/* sc-component-id: sc-bxivhb */
.eVhvCo{background:#2F333D;margin:0;padding:0;list-style-type:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;padding-right:10px;text-align:center;} .eVhvCo a{color:#ECF0F1;}</style><title data-react-helmet="true">Site title</title><meta data-react-helmet="true" name="description" content="Sample"/><meta data-react-helmet="true" name="keywords" content="sample, something"/><style id="gatsby-inlined-css">@import url(https://fonts.googleapis.com/css?family=Source+Code+Pro);/*! normalize.css v8.0.0 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}html{font-family:Source Code Pro;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0;colo:#ecf0f1}p{font-family:Source Code Pro,monospace}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0;font-family:Source Code Pro,monospace}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:georgia,serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern","liga","clig","calt";-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;margin:0 0 1.45rem;padding:0}h1{font-size:2.25rem}h1,h2{margin:0 0 1.45rem;padding:0;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{margin:0 0 1.45rem;padding:0;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{margin:0 0 1.45rem;padding:0;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{margin:0 0 1.45rem;padding:0}ol,ul{margin:0 0 1.45rem 1.45rem;padding:0;list-style-position:outside;list-style-image:none}dd,dl,figure,p{margin:0 0 1.45rem;padding:0}pre{padding:0;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}pre,table{margin:0 0 1.45rem}table{padding:0;font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset{margin:0 0 1.45rem;padding:0}blockquote{margin:0 1.45rem 1.45rem;padding:0}form,iframe,noscript{margin:0 0 1.45rem;padding:0}hr{margin:0 0 calc(1.45rem - 1px);padding:0;background:rgba(0,0,0,.2);border:none;height:1px}address{margin:0 0 1.45rem;padding:0}b,dt,strong,th{font-weight:700}li{margin-bottom:0.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:0.725rem;margin-top:0.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:0.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:0;padding-top:.2em;padding-bottom:.2em}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}.container{display:flex;flex-direction:row}.details{display:flex;flex-direction:column}.date_details{display:flex;flex-direction:row}.thumbnail{padding-right:5%}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="-1766907003"><!-- react-empty: 2 --><div class="sc-bdVaJa hUhYMh" data-reactid="3"><div class="sc-bwzfXH llRMCE" data-reactid="4"><header class="header" data-reactid="5"><div style="width:100px;" data-reactid="6"><h1 data-reactid="7"><a href="/personal_blog/" data-reactid="8"><div class=" gatsby-image-outer-wrapper" style="position:relative;" data-reactid="9"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;" data-reactid="10"><div style="width:100%;padding-bottom:100%;" data-reactid="11"></div><img alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAABoklEQVQ4y62VS07DMBCGE7LlFEiIk8R97yoOUK7DqjsuwKbtpmINBLFpe5lkA2le5h97HByThqhgaZSxPfn8O2NPvEQILwlDjxr5sRCBZzWM3cHu6z7HnmwxBwDkOaBbzO3kdCrhH9z4zpYwjNTBnxOgGI1kOhwqA+SlBjoLt8IQ5LO/lJOJPAICv4AdcwIKEZ0L3JZQhmcKq6CsyHU/oq2q723ZaWAYGuCKgFggJ2DCQKMQYz78CwNrBfOgAW4qrYiAatu53v4bFr203gkU2CSU1fcCZgQMwwj+E+wRdm2DrXc19BdgaZIC/13OZjT2AXuA3Vhgv++WFZAVvn4OBjRWyfHYJI7AV7xtv7fCRCuM8u/jpJLGitdG5bnAkucy7m/4Sv4JWFFMpY/U+j+A0gBrhfaW3YNtvlGXQjr8HLtqJCVuAtXVQz/tAmKeblHKwO2PLHcUhyxjIJ1F9jOaoxiKBWjZANoVhE/+PHbKF8aeyUy/0MoOHBs0qlBsVWu3wMJUgUXwHv6e/R3NtdZTYnFS7Fvj/gIW9AtgWzhzgVt5vgD76F8k/cb91wAAAABJRU5ErkJggg==" style="position:absolute;top:0;left:0;transition:opacity 0.5s;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:0.25s;" data-reactid="12"/><noscript data-reactid="13"><img src="/personal_blog/static/logo-red-6cf6bcd5543731bc28ea1e2966e4a052-bdc27.png" srcset="/personal_blog/static/logo-red-6cf6bcd5543731bc28ea1e2966e4a052-4eed1.png 480w,
/personal_blog/static/logo-red-6cf6bcd5543731bc28ea1e2966e4a052-bdc27.png 600w" alt="" sizes="(max-width: 600px) 100vw, 600px" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></noscript></div></div></a></h1></div><nav class="sc-htpNat haUzkZ" data-reactid="14"><ul data-reactid="15"><li data-reactid="16"><a href="/personal_blog/" data-reactid="17"><!-- react-text: 18 --> <!-- /react-text --><!-- react-text: 19 -->Home<!-- /react-text --><!-- react-text: 20 --> <!-- /react-text --></a></li><li data-reactid="21"><a href="/personal_blog/about" data-reactid="22"><!-- react-text: 23 --> <!-- /react-text --><!-- react-text: 24 -->About<!-- /react-text --><!-- react-text: 25 --> <!-- /react-text --></a></li><li data-reactid="26"><a href="/personal_blog/contact" data-reactid="27"><!-- react-text: 28 --> <!-- /react-text --><!-- react-text: 29 -->Contact<!-- /react-text --><!-- react-text: 30 --> <!-- /react-text --></a></li><li data-reactid="31"><a href="/personal_blog/projects" data-reactid="32"><!-- react-text: 33 --> <!-- /react-text --><!-- react-text: 34 -->Projects<!-- /react-text --><!-- react-text: 35 --> <!-- /react-text --></a></li></ul></nav></header></div><div class=" gatsby-image-outer-wrapper" style="position:initial;" data-reactid="36"><div class=" gatsby-image-wrapper" style="position:absolute;overflow:hidden;left:0;top:0;width:100%;height:100%;opacity:0.5;" data-reactid="37"><div style="width:100%;padding-bottom:66.65929203539822%;" data-reactid="38"></div><img alt="" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEFAgT/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABpTXia5Bif//EABkQAAMBAQEAAAAAAAAAAAAAAAABAhEQIf/aAAgBAQABBQK7Uq6dmMwvzn//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPwGH/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Bp//EABYQAAMAAAAAAAAAAAAAAAAAACAhMf/aAAgBAQAGPwJ0v//EABsQAAIDAAMAAAAAAAAAAAAAAAABESExQXGB/9oACAEBAAE/IYBZeC5c1iH1ejpbbkbKwZ//2gAMAwEAAgADAAAAEPvP/8QAFxEAAwEAAAAAAAAAAAAAAAAAARARIf/aAAgBAwEBPxARq//EABcRAAMBAAAAAAAAAAAAAAAAAAEQESH/2gAIAQIBAT8QNYv/xAAcEAEAAwACAwAAAAAAAAAAAAABABEhMVFBgcH/2gAIAQEAAT8QXL0Hk7iS9MDwevsTTQnkQ1NiktV5Y9DLG3Hbuz//2Q==" style="position:absolute;top:0;left:0;transition:opacity 0.5s;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:0.25s;" data-reactid="39"/><noscript data-reactid="40"><img src="/personal_blog/static/desk-dd00421be84202cfd883f025375d6b76-47774.jpg" srcset="/personal_blog/static/desk-dd00421be84202cfd883f025375d6b76-45ad6.jpg 480w,
/personal_blog/static/desk-dd00421be84202cfd883f025375d6b76-e2fcf.jpg 960w,
/personal_blog/static/desk-dd00421be84202cfd883f025375d6b76-47774.jpg 1920w,
/personal_blog/static/desk-dd00421be84202cfd883f025375d6b76-93088.jpg 2880w,
/personal_blog/static/desk-dd00421be84202cfd883f025375d6b76-bfc0d.jpg 3840w,
/personal_blog/static/desk-dd00421be84202cfd883f025375d6b76-5d4fb.jpg 4520w" alt="" sizes="(max-width: 1920px) 100vw, 1920px" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></noscript></div></div></div><div style="margin:0 auto;max-width:1040px;padding:0px 1.0875rem 1.45rem;padding-top:0;" data-reactid="41"><div data-reactid="42"><h1 data-reactid="43">Setup Graylog2 - Centos 7</h1><div data-reactid="44"><p>Graylog2 is a centralized log management system. It is based on Elasticsearch
and MongoDB, and are able to analyze and aggregate log messages from multiple sources.
I don't think it would be wrong to say that Graylog2 is one of the big players when
it comes to centralized log management systems.
It won't take you a long time to understand how to use Graylog2 and when you do, then
you wouldn't be with out it!</p>
<p>I am using Graylog2 to pull log files from all my servers and a PfSense firewall,
and my life have become much more simple afterwards! it is so easy to create a stream of the exact log files you want to collect.
Just to give you a example of what a stream is then i have createated a stream
there is showing me Accepted/Failed SSH and OpenVPN login attempts. And one for every
time a root user is being used.   </p>
<blockquote>
<p>Table of Content :</p>
</blockquote>
<ul>
<li>Step 1. Pre-requisites</li>
<li>Step 2. Install &#x26; configure Elasticsearch</li>
<li>Step 3. Install MongoDB</li>
<li>Step 4. Install &#x26; Configure Graylog2</li>
<li>Step 5. Install Graylog- web interface</li>
</ul>
<h4>Step 1. Pre-requisites</h4>
<p>You have to be <strong>root</strong>!
the first thing we are gonna do is to disable Centos firewall and SeLinux as a start. (we will enable the firewall  later.)</p>
<pre><code>systemctl disable firewalld
systemctl status firewalld
systemctl status firewalld
</code></pre>
<p>to see if SeLinux is enabled on your system type <code>sestatus</code> if it is disabled then skip this part,</p>
<pre><code>[root@graylog2 ~]# sestatus
SELinux status:                 enabled
SELinuxfs mount:                /sys/fs/selinux
SELinux root directory:         /etc/selinux
Loaded policy name:             targeted
Current mode:                   enforcing
Mode from config file:          disabled
Policy MLS status:              enabled
Policy deny_unknown status:     allowed
Max kernel policy version:      28
</code></pre>
<p>If it is enabled then open the .config file</p>
<pre><code>vim /etc/sysconfig/selinux
</code></pre>
<p>find the line below and set it to SELINUX=disabled</p>
<pre><code>SELINUX=enforced
</code></pre>
<p>and restart your system. once you are in again then try to see the status again. It should have changed disabled now</p>
<pre><code>[root@graylog2 ~]# sestatus
SELinux status:                 disabled
</code></pre>
<p>Enable <a href="https://fedoraproject.org/wiki/EPEL">EPEL Repository</a></p>
<pre><code># wget http://dl.fedoraproject.org/pub/epel/7/x86_64/e/epel-release-7-5.noarch.rpm
# rpm -ivh epel-release-7-5.noarch.rpm
</code></pre>
<p>and after you have enabled EPEL then install Java.</p>
<pre><code># yum install Java
</code></pre>
<p>Verify that Java have been installed</p>
<pre><code># java -version
openjdk version "1.8.0_65"
OpenJDK Runtime Environment (build 1.8.0_65-b17)
OpenJDK 64-Bit Server VM (build 25.65-b01, mixed mode)
</code></pre>
<p>We are also going to need pwgen later</p>
<pre><code>yum -y install pwgen
</code></pre>
<h4>Step 2. Install &#x26; configure Elasticsearch</h4>
<p>First import the GPG-Key</p>
<pre><code>rpm --import https://packages.elastic.co/GPG-KEY-elasticsearch
</code></pre>
<p>Add Elasticsearch to your repositoriy</p>
<pre><code>vim /etc/yum.repos.d/elasticsearch.repo
</code></pre>
<p>And insert the following lines</p>
<pre><code>[elasticsearch-1.7]
name=Elasticsearch repository for 1.7.x packages
baseurl=http://packages.elastic.co/elasticsearch/1.7/centos
gpgcheck=1
gpgkey=http://packages.elastic.co/GPG-KEY-elasticsearch
enabled=1
</code></pre>
<p>You should be ready to install Elasticsearch now</p>
<pre><code># yum -y install elasticsearch
</code></pre>
<p>Configure Elasticseach to start during system startup.</p>
<pre><code># systemctl daemon-reload
# systemctl enable elasticsearch.service
</code></pre>
<p>There is only one important configuration we have to set in Elasticsearch
to make it work with Graylog2</p>
<pre><code># vim /etc/elasticsearch/elasticsearch.yml
</code></pre>
<p>Find line 32 in the file and set the cluster name to graylog2</p>
<pre><code> 27 ################################### Cluster ###################################
 28
 29 # Cluster name identifies your cluster for auto-discovery. If you're running
 30 # multiple clusters on the same network, make sure you're using unique names.
 31 #
 32 cluster.name: graylog2
 33
 34
</code></pre>
<p>that should be it. now restart the service to make it read the new settings</p>
<pre><code>#systemctl restart elasticsearch.service
</code></pre>
<h4>Step 3. Install MongoDB</h4>
<p>Almos same procedure as in step 2. but this time will we add the repository
for MongoDB</p>
<pre><code># vim /etc/yum.repos.d/mongodb-org-3.0.repo
</code></pre>
<p>Add the lines below quit and save.</p>
<pre><code>[mongodb-org-3.0]
name=MongoDB Repository
baseurl=http://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.0/x86_64/
gpgcheck=0
enabled=1
</code></pre>
<p>Install MongoDB</p>
<pre><code># yum -y install mongodb-org
</code></pre>
<h4>Step 4. Install &#x26; Configure Graylog2</h4>
<p>First install Graylog2's repository</p>
<pre><code># rpm -Uvh https://packages.graylog2.org/repo/packages/graylog-1.2-repository-el7_latest.
</code></pre>
<p>Then install Graylog2</p>
<pre><code># yum -y install graylog-server
</code></pre>
<p>Before we are going to configure Graylog2's .conf file i want you to do two things.
remember to copy and save the output.!</p>
<p>Number 1. Create a password with pwgen for password_secret</p>
<pre><code># pwgen -N 1 -s 96
Hz63qI3vRiJezJ6U44PmgtNV5eh0ixiBlRImqPwJAOeUDaWb5wopeSXavxFdzHlAP6BZtJBol8fdHqDjrOCoUq2fczBGhud6
</code></pre>
<p>Number 2. Get  the sha265 sum of your accounts password</p>
<pre><code># echo -n yourpassword | sha256sum
e3c652f0ba0b4801205814f8b6bc49672c4c74e25b497770bb89b22cdeb4e951  -
</code></pre>
<p>And now is the time to configure Graylog2.<br>
open the .conf file</p>
<pre><code>vim /etc/graylog/server/server.conf
</code></pre>
<p>Find the lines below in the configuration file and edit them. (This is a configuration example for only one host)</p>
<pre><code>password_secret = Insert number 1. output

root_password_sha2 = insert number 2. output

root_timezone = UTC

elasticsearch_http_enabled = false

elasticsearch_discovery_zen_ping_unicast_hosts = graylog2-server-ip:9300

elasticsearch_shards = 1

elasticsearch_replicas = 0

mongodb_useauth = false
</code></pre>
<p>and restart the Graylog2 server to make it load the new configuration.</p>
<pre><code>systemctl restart graylog-server
</code></pre>
<h4>Step 5. Install Graylog- web interface</h4>
<p>We are going to install a web interface for Graylog2 as well.</p>
<pre><code>yum -y install graylog-web
</code></pre>
<p>And first create a new password with pwgen(remember to copy the output)</p>
<pre><code>pwgen -N 1 -s 96
</code></pre>
<pre><code>vim /etc/graylog/web/web.conf
</code></pre>
<p>edit the following lines in the configuration file. if you want to add more Graylog2 nodes in the future then just separate the IP with a comma.</p>
<pre><code>graylog2-server.uris="http://127.0.0.1:12900/"
application.secret=""
</code></pre>
<p>we are going to let CentOS start graylog-web on boot.</p>
<pre><code>systemctl enable graylog-web
systemctl restart graylog-web
</code></pre>
<p>and open your web-browser and type in <code>raylog2_ip:9000</code>. You should see a screen like this. your
username is <strong>admin</strong> and the password is the one you created earlier in the guide.</p>
<p>See also how you can :</p>
<blockquote>
<ul>
<li>Create syslog input and configure rsyslog.</li>
<li>Add extractors</li>
<li>How to let Gratlog2 send mails with Gmail SMTP</li>
<li>Connect Pfsense with the snort package to Graylog2</li>
</ul>
</blockquote></div></div></div><ul class="sc-bxivhb eVhvCo" data-reactid="45"><li style="padding:14px 16px;" data-reactid="46"><a class="Facebook" href="https://www.facebook.com/daniel.guldberg.aaes" data-reactid="47"><!-- react-text: 48 --> <!-- /react-text --><svg aria-hidden="true" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-reactid="49"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z" data-reactid="50"></path></svg><!-- react-text: 51 --> <!-- /react-text --><!-- react-text: 52 -->Facebook<!-- /react-text --><!-- react-text: 53 --> <!-- /react-text --></a></li><li style="padding:14px 16px;" data-reactid="54"><a class="Github" href="https://github.com/notaduck" data-reactid="55"><!-- react-text: 56 --> <!-- /react-text --><svg aria-hidden="true" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-w-16 " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-reactid="57"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z" data-reactid="58"></path></svg><!-- react-text: 59 --> <!-- /react-text --><!-- react-text: 60 -->Github<!-- /react-text --><!-- react-text: 61 --> <!-- /react-text --></a></li></ul></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-e93bb8a86c40144abace.js","195351340454287":"component---src-templates-post-js-d37e94d6ace0825752a5.js","162898551421021":"component---src-pages-404-js-4503918ea3a16cfcdb75.js","263791100135453":"component---src-pages-about-js-0b286ad311af6b0c654b.js","70144966829960":"component---src-pages-contact-js-3b43ba89ffb832e7b731.js","35783957827783":"component---src-pages-index-js-f4d813187da6c40a2495.js","218538773642512":"component---src-pages-page-2-js-1d4f0f19c1c44398ab65.js","213720915766396":"component---src-pages-projects-js-da2eaaf57f7689379f6a.js","60335399758886":"path----48ee912158b9d7580bad.js","254475077989897":"path---08-24-2017-first-blog-67bbd2b0374cfbaf093a.js","226264546318899":"path---markdown-post-fa56bf20514985089ff7.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","273950069227526":"path---about-a0e39f21c11f6a62c5ab.js","184662623972074":"path---contact-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-177b94943bc4e42e1fa2.js","135728916539164":"path---page-2-a0e39f21c11f6a62c5ab.js","97786326051841":"path---projects-a0e39f21c11f6a62c5ab.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","114276838955818":"component---src-layouts-index-js-547dc2de0b6f2e825259.js"}/*]]>*/</script><script>/*<![CDATA[*/["/personal_blog/commons-512ca5ce87838b4470c0.js","/personal_blog/app-e93bb8a86c40144abace.js","/personal_blog/path---markdown-post-fa56bf20514985089ff7.js","/personal_blog/component---src-templates-post-js-d37e94d6ace0825752a5.js","/personal_blog/component---src-layouts-index-js-547dc2de0b6f2e825259.js"].forEach(function(s){document.write('<script src="'+s+'" defer></'+'script>')})/*]]>*/</script></body></html>